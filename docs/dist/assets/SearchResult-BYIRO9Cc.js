import{u as U,h as te,i as ae,j as z,k as se,P as le,t as re,l as ie,n as _,p as D,q as oe,s as M,v as a,x as ce,R as P,y as ne,z as ue,A as Ee,C as ge,B as he,D as ve,E as pe,G as ye,H as me,I as F,J as de,K as Ae,L as Be,M as T,N as $,O as we}from"./app-CvUiixO9.js";const be=["/blog.html","/home.html","/","/about/bzhan.html","/about/csdn.html","/about/gitee.html","/about/github.html","/about/group.html","/about/","/about/zhishi.html","/algorithm/","/cpp/","/docker/","/git/","/go/","/interview/","/java/","/jenkins/","/linux/","/k8s/","/middleware/elastic.html","/middleware/kafka.html","/middleware/mycat.html","/middleware/rabbitmq.html","/middleware/","/middleware/redis.html","/middleware/sdjdbc.html","/nginx/","/photo/","/project/","/sql/","/sql/sql-base.html","/python/","/web/init-project.html","/web/","/algorithm/algo-important/algo-imp01.html","/algorithm/algo-base/algo-base01.html","/algorithm/leetcode/leetcode-01.html","/algorithm/sort-base/sort01.html","/cpp/cpp-base/cpp-base01.html","/cpp/cpp-pluss/cpp-pluss01.html","/go/go-base/go-base01.html","/go/go-pluss/go-pluss01.html","/java/java-pluss/java-pluss01.html","/java/java-base/java-base01.html","/project/dr/","/project/height/","/project/master/","/project/primary/","/project/middle/","/project/undergraduate/","/sql/mongodb/","/sql/mysql/","/python/python-base/python-base01.html","/sql/redis/","/python/python-pluss/python-pluss01.html","/tools/dev/","/tools/online-website/","/web/html_css/css01.html","/web/html_css/html01.html","/web/html_css/html02.html","/web/html_css/html03.html","/web/js/js01.html","/web/js/js02.html","/web/react/react01.html","/web/vue/vue01.html","/interview/cpp/baguwen/cpp01.html","/interview/cpp/mianshiti/cpp-01.html","/interview/java/baguwen/java01.html","/interview/java/mianshiti/java-01.html","/interview/java/mianshiti/java-02.html","/interview/go/baguwen/go01.html","/interview/go/mianshiti/go-01.html","/interview/web/react/react01.html","/interview/web/vue/vue01.html","/interview/python/baguwen/python01.html","/interview/python/mianshiti/python-01.html","/404.html","/algorithm/algo-important/","/algorithm/algo-base/","/algorithm/leetcode/","/algorithm/sort-base/","/cpp/cpp-base/","/cpp/cpp-pluss/","/go/go-base/","/go/go-pluss/","/java/java-pluss/","/java/java-base/","/python/python-base/","/python/python-pluss/","/tools/","/web/html_css/","/web/js/","/web/react/","/web/vue/","/interview/cpp/baguwen/","/interview/cpp/","/interview/cpp/mianshiti/","/interview/java/baguwen/","/interview/java/","/interview/java/mianshiti/","/interview/go/baguwen/","/interview/go/","/interview/go/mianshiti/","/interview/web/react/","/interview/web/","/interview/web/vue/","/interview/python/baguwen/","/interview/python/","/interview/python/mianshiti/","/category/","/category/%E8%81%94%E7%B3%BB%E4%BD%9C%E8%80%85/","/category/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/","/category/%E8%BF%90%E7%BB%B4/","/category/docker/","/category/git/","/category/%E9%9D%A2%E8%AF%95/","/category/jenkins/","/category/linux/","/category/k8s/","/category/%E4%B8%AD%E9%97%B4%E4%BB%B6/","/category/elasticsearch/","/category/kafka/","/category/mycat/","/category/rabbitmq/","/category/redis/","/category/shardingjdbc/","/category/nginx/","/category/%E5%A3%81%E7%BA%B8/","/category/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/","/category/%E6%95%B0%E6%8D%AE%E5%BA%93/","/category/web/","/category/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/","/category/%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3/","/category/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","/category/%E7%AE%97%E6%B3%95/","/category/leetcode/","/category/%E6%8E%92%E5%BA%8F/","/category/c__/","/category/go/","/category/java/","/category/mongodb/","/category/nosql/","/category/sql/","/category/mysql/","/category/python/","/category/%E5%BC%80%E5%8F%91%E5%BF%85%E5%A4%87%E5%B7%A5%E5%85%B7/","/category/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E7%AE%B1/","/category/css/","/category/html/","/category/javascript/","/category/react/","/category/vue/","/category/c__%E5%85%AB%E8%82%A1%E6%96%87/","/category/java%E5%85%AB%E8%82%A1%E6%96%87/","/category/java%E9%9D%A2%E8%AF%95%E9%A2%98/","/category/go%E9%9D%A2%E8%AF%95%E9%A2%98/","/category/react%E7%BB%8F%E5%85%B8%E9%9D%A2%E8%AF%95%E9%A2%98/","/category/vue%E7%BB%8F%E5%85%B8%E9%9D%A2%E8%AF%95%E9%A2%98/","/category/python%E5%85%AB%E8%82%A1%E6%96%87/","/category/python%E9%9D%A2%E8%AF%95%E9%A2%98/","/tag/","/tag/%E5%AD%A6%E4%B9%A0%E5%8E%86%E7%A8%8B/","/tag/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/","/tag/docker/","/tag/git/","/tag/%E9%9D%A2%E8%AF%95/","/tag/jenkins/","/tag/linux/","/tag/k8s/","/tag/%E4%B8%AD%E9%97%B4%E4%BB%B6/","/tag/elasticsearch/","/tag/kafka/","/tag/mycat/","/tag/rabbitmq/","/tag/redis/","/tag/shardingjdbc/","/tag/nginx/","/tag/%E5%A3%81%E7%BA%B8/","/tag/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/","/tag/%E6%95%B0%E6%8D%AE%E5%BA%93/","/tag/web/","/tag/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/","/tag/%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3/","/tag/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/","/tag/%E7%AE%97%E6%B3%95/","/tag/leetcode/","/tag/%E6%8E%92%E5%BA%8F/","/tag/c__/","/tag/go/","/tag/java/","/tag/mongodb/","/tag/nosql/","/tag/sql/","/tag/mysql/","/tag/python/","/tag/%E5%BC%80%E5%8F%91%E5%BF%85%E5%A4%87%E5%B7%A5%E5%85%B7/","/tag/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E7%AE%B1/","/tag/css/","/tag/html/","/tag/javascript/","/tag/react/","/tag/vue/","/tag/c__%E5%85%AB%E8%82%A1%E6%96%87/","/tag/java%E5%85%AB%E8%82%A1%E6%96%87/","/tag/java%E9%9D%A2%E8%AF%95%E9%A2%98/","/tag/go%E9%9D%A2%E8%AF%95%E9%A2%98/","/tag/react%E7%BB%8F%E5%85%B8%E9%9D%A2%E8%AF%95%E9%A2%98/","/tag/vue%E7%BB%8F%E5%85%B8%E9%9D%A2%E8%AF%95%E9%A2%98/","/tag/python%E5%85%AB%E8%82%A1%E6%96%87/","/tag/python%E9%9D%A2%E8%AF%95%E9%A2%98/","/article/","/star/","/timeline/"],je="SEARCH_PRO_QUERY_HISTORY",m=U(je,[]),De=()=>{const{queryHistoryCount:s}=F,l=s>0;return{enabled:l,queryHistory:m,addQueryHistory:r=>{l&&(m.value=Array.from(new Set([r,...m.value.slice(0,s-1)])))},removeQueryHistory:r=>{m.value=[...m.value.slice(0,r),...m.value.slice(r+1)]}}},Q=s=>be[s.id]+("anchor"in s?`#${s.anchor}`:""),Fe="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:I}=F,d=U(Fe,[]),ke=()=>{const s=I>0;return{enabled:s,resultHistory:d,addResultHistory:l=>{if(s){const r={link:Q(l),display:l.display};"header"in l&&(r.header=l.header),d.value=[r,...d.value.slice(0,I-1)]}},removeResultHistory:l=>{d.value=[...d.value.slice(0,l),...d.value.slice(l+1)]}}},qe=s=>{const l=ge(),r=z(),k=he(),o=_(0),w=D(()=>o.value>0),v=ve([]);return pe(()=>{const{search:p,terminate:q}=ye(),A=me(u=>{const B=u.join(" "),{searchFilter:f=h=>h,splitWord:H,suggestionsFilter:S,...y}=l.value;B?(o.value+=1,p(u.join(" "),r.value,y).then(h=>f(h,B,r.value,k.value)).then(h=>{o.value-=1,v.value=h}).catch(h=>{console.warn(h),o.value-=1,o.value||(v.value=[])})):v.value=[]},F.searchDelay-F.suggestDelay);M([s,r],([u])=>A(u),{immediate:!0}),de(()=>{q()})}),{isSearching:w,results:v}};var He=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(s,{emit:l}){const r=ae(),k=z(),o=se(le),{enabled:w,addQueryHistory:v,queryHistory:p,removeQueryHistory:q}=De(),{enabled:A,resultHistory:u,addResultHistory:B,removeResultHistory:f}=ke(),H=w||A,S=re(s,"queries"),{results:y,isSearching:h}=qe(S),i=ie({isQuery:!0,index:0}),E=_(0),g=_(0),L=D(()=>H&&(p.value.length>0||u.value.length>0)),R=D(()=>y.value.length>0),x=D(()=>y.value[E.value]||null),Y=()=>{const{isQuery:e,index:t}=i;t===0?(i.isQuery=!e,i.index=e?u.value.length-1:p.value.length-1):i.index=t-1},G=()=>{const{isQuery:e,index:t}=i;t===(e?p.value.length-1:u.value.length-1)?(i.isQuery=!e,i.index=0):i.index=t+1},J=()=>{E.value=E.value>0?E.value-1:y.value.length-1,g.value=x.value.contents.length-1},K=()=>{E.value=E.value<y.value.length-1?E.value+1:0,g.value=0},N=()=>{g.value<x.value.contents.length-1?g.value+=1:K()},V=()=>{g.value>0?g.value-=1:J()},C=e=>e.map(t=>we(t)?t:a(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=Ae[e.index]||"$content",[c,j=""]=Be(t)?t[k.value].split("$content"):t.split("$content");return e.display.map(n=>a("div",C([c,...n,j])))}return e.display.map(t=>a("div",C(t)))},b=()=>{E.value=0,g.value=0,l("updateQuery",""),l("close")},X=()=>w?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},o.value.queryHistory),p.value.map((e,t)=>a("div",{class:["search-pro-result-item",{active:i.isQuery&&i.index===t}],onClick:()=>{l("updateQuery",e)}},[a(T,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},e),a("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:c=>{c.preventDefault(),c.stopPropagation(),q(t)}})]))])):null,Z=()=>A?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},o.value.resultHistory),u.value.map((e,t)=>a(P,{to:e.link,class:["search-pro-result-item",{active:!i.isQuery&&i.index===t}],onClick:()=>{b()}},()=>[a(T,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[e.header?a("div",{class:"content-header"},e.header):null,a("div",e.display.map(c=>C(c)).flat())]),a("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:c=>{c.preventDefault(),c.stopPropagation(),f(t)}})]))])):null;return oe("keydown",e=>{if(s.isFocusing){if(R.value){if(e.key==="ArrowUp")V();else if(e.key==="ArrowDown")N();else if(e.key==="Enter"){const t=x.value.contents[g.value];v(s.queries.join(" ")),B(t),r.push(Q(t)),b()}}else if(A){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:t}=i;i.isQuery?(l("updateQuery",p.value[t]),e.preventDefault()):(r.push(u.value[t].link),b())}}}}),M([E,g],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>a("div",{class:["search-pro-result-wrapper",{empty:s.queries.length?!R.value:!L.value}],id:"search-pro-results"},s.queries.length?h.value?a(ce,{hint:o.value.searching}):R.value?a("ul",{class:"search-pro-result-list"},y.value.map(({title:e,contents:t},c)=>{const j=E.value===c;return a("li",{class:["search-pro-result-list-item",{active:j}]},[a("div",{class:"search-pro-result-title"},e||o.value.defaultTitle),t.map((n,ee)=>{const O=j&&g.value===ee;return a(P,{to:Q(n),class:["search-pro-result-item",{active:O,"aria-selected":O}],onClick:()=>{v(s.queries.join(" ")),B(n),b()}},()=>[n.type==="text"?null:a(n.type==="title"?ne:n.type==="heading"?ue:Ee,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[n.type==="text"&&n.header?a("div",{class:"content-header"},n.header):null,a("div",W(n))])])})])})):o.value.emptyResult:H?L.value?[X(),Z()]:o.value.emptyHistory:o.value.emptyResult)}});export{He as default};
